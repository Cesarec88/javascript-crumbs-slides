<!DOCTYPE html>
<html>
<head>
<style>

body {
  font-family: Helvetica Neue;
  font-size: 20px;
}

</style>

<style>
  pre code {
  display: block; padding: 0.5em;
  color: #333;
  background: #f8f8ff
}

pre .comment,
pre .template_comment,
pre .diff .header,
pre .javadoc {
  color: #998;
  font-style: italic
}

pre .keyword,
pre .css .rule .keyword,
pre .winutils,
pre .javascript .title,
pre .nginx .title,
pre .subst,
pre .request,
pre .status {
  color: #333;
  font-weight: bold
}

pre .number,
pre .hexcolor,
pre .ruby .constant {
  color: #099;
}

pre .string,
pre .tag .value,
pre .phpdoc,
pre .tex .formula {
  color: #d14
}

pre .title,
pre .id {
  color: #900;
  font-weight: bold
}

pre .javascript .title,
pre .lisp .title,
pre .clojure .title,
pre .subst {
  font-weight: normal
}

pre .class .title,
pre .haskell .type,
pre .vhdl .literal,
pre .tex .command {
  color: #458;
  font-weight: bold
}

pre .tag,
pre .tag .title,
pre .rules .property,
pre .django .tag .keyword {
  color: #000080;
  font-weight: normal
}

pre .attribute,
pre .variable,
pre .lisp .body {
  color: #008080
}

pre .regexp {
  color: #009926
}

pre .class {
  color: #458;
  font-weight: bold
}

pre .symbol,
pre .ruby .symbol .string,
pre .lisp .keyword,
pre .tex .special,
pre .prompt {
  color: #990073
}

pre .built_in,
pre .lisp .title,
pre .clojure .built_in {
  color: #0086b3
}

pre .preprocessor,
pre .pi,
pre .doctype,
pre .shebang,
pre .cdata {
  color: #999;
  font-weight: bold
}

pre .deletion {
  background: #fdd
}

pre .addition {
  background: #dfd
}

pre .diff .change {
  background: #0086b3
}

pre .chunk {
  color: #aaa
}

</style>
</head>

<body>


<article>
<h1>Functions</h1>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Definition</h2>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">name</span> <span class="params">(comma_separated_params)</span> {</span>
  <span class="comment">// code block </span>
}</code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Definition</h2>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> <span class="params">(a, b)</span> {</span>
  <span class="keyword">var</span> result = a + b;
  <span class="keyword">return</span> result;
}</code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Definition</h2>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">greets</span> <span class="params">(name)</span> {</span>
  alert(<span class="string">'Hello '</span> + name + <span class="string">'!'</span>);
  <span class="comment">// implicitly return undefined;</span>
}</code></pre>
<pre><code class="language-js"><span class="keyword">var</span> square = <span class="function"><span class="keyword">function</span> <span class="params">(x)</span> {</span>
  <span class="keyword">return</span> x*x;
};</code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Invocation</h2>
<pre><code class="language-js"><span class="keyword">var</span> result = square(<span class="number">3</span>);
result; <span class="comment">// ?</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Invocation</h2>
<h3>Arguments and parameters</h3>
<h4>Optional parameters</h4>
<p>If arguments are fewer than declared parameters<br>the additional parameters are set to <code>undefined</code></p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> <span class="params">(a, b)</span> <span class="comment">{ return a + b; }</span>

<span class="title">sum</span><span class="params">(3)</span>;</span>       <span class="comment">// NaN</span>
sum(<span class="string">'Hello '</span>); <span class="comment">// "Hello undefined"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Invocation</h2>
<h3>Arguments and parameters</h3>
<h4>Arguments list</h4>
<p>If arguments are more than declared parameters<br>you can access them by the <code>arguments</code> object</p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">args</span> <span class="params">()</span> <span class="comment">{
  return arguments;
}</span>

<span class="title">args</span><span class="params">(1, <span class="string">'hello'</span>, Math.PI)</span>;</span> <span class="comment">//[1, "hello", 3.141592653589793]</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Invocation</h2>
<h3>Arguments list</h3>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">sumAll</span> <span class="params">()</span> {</span>
  var result = <span class="number">0</span>;
  <span class="keyword">for</span> (var <span class="built_in">i</span> = <span class="number">0</span>; <span class="built_in">i</span> &lt; <span class="transposed_variable">arguments.</span><span class="built_in">length</span>; <span class="built_in">i</span>++) <span class="cell">{
    result += arguments[i];
  }</span>
  <span class="keyword">return</span> result;
}</code></pre>
<pre><code class="language-js">sumAll(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>); <span class="comment">//15</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Invocation</h2>
<h3>Arguments list</h3>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">max</span> <span class="params">()</span> {</span>
  var max = <span class="transposed_variable">Number.</span>NEGATIVE_INFINITY;
  <span class="keyword">for</span> (var <span class="built_in">i</span> = <span class="number">0</span>; <span class="built_in">i</span> &lt; <span class="transposed_variable">arguments.</span><span class="built_in">length</span>; <span class="built_in">i</span>++) <span class="cell">{
    max = arguments[i] max ? arguments[i] : max;
  }</span>
  <span class="keyword">return</span> max;
}</code></pre>
<pre><code class="language-js"><span class="built_in">max</span>(<span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">42</span>, Math.PI, <span class="number">1.4142135</span>); <span class="comment">//100</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Function as values</h2>
<h3>Functions are objects</h3>
<p>JavaScript functions are a special kind of object with two important features:</p>
<ul>
<li>they contain code  </li>
<li>they are executable (can be invoked)  </li>
</ul>
<p>and because they are objects:</p>
<ul>
<li>they can be assigned to variables or object properties</li>
<li>they can be passed to functions  </li>
<li>they can have properties</li>
<li>they can be returned by functions</li>
</ul>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Function as values</h2>
<h3>Assign function to variables</h3>
<p>JavaScript function can be assigned to variables or object properties.</p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">()</span> {</span> <span class="keyword">return</span> <span class="string">'Hello!'</span>; };
<span class="keyword">var</span> greets = f;
<span class="keyword">var</span> person = { say: greets };</code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Function as values</h2>
<h3>Copy function to variables</h3>
<p>JavaScript functions can be copied to different variables.</p>
<pre><code class="language-js"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span> <span class="params">(a, b)</span> <span class="comment">{ return a + b; }</span>
<span class="title">var</span> <span class="title">add</span> = <span class="title">sum</span>;</span></code></pre>
<pre><code class="language-js">var result = <span class="keyword">add</span>(<span class="number">1</span>, <span class="number">2</span>)<span class="comment">;</span>
result<span class="comment">; //3</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Function as values</h2>
<h3>Pass function to functions</h3>
<p>JavaScript functions can be passed to other function.</p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">add</span> <span class="params">(x,y)</span> { <span class="title">return</span> <span class="title">x</span> + <span class="title">y</span>; }</span>
<span class="function"><span class="keyword">function</span> <span class="title">sub</span> <span class="params">(x,y)</span> { <span class="title">return</span> <span class="title">x</span> - <span class="title">y</span>; }</span>
<span class="function"><span class="keyword">function</span> <span class="title">mul</span> <span class="params">(x,y)</span> { <span class="title">return</span> <span class="title">x</span> * <span class="title">y</span>; }</span>
<span class="function"><span class="keyword">function</span> <span class="title">div</span> <span class="params">(x,y)</span> { <span class="title">return</span> <span class="title">x</span> / <span class="title">y</span>; }</span>

<span class="function"><span class="keyword">function</span> <span class="title">calc</span> <span class="params">(operator, x, y)</span> {</span>
  <span class="keyword">return</span> operator(x, y);
}</code></pre>
<pre><code class="language-js">// Calculate ((<span class="number">2</span>+<span class="number">3</span>) + (<span class="number">4</span>*<span class="number">5</span>))
calc(<span class="keyword">add</span>, calc(<span class="keyword">add</span>, <span class="number">2</span>, <span class="number">3</span>), calc(<span class="keyword">mul</span>, <span class="number">4</span>, <span class="number">5</span>))<span class="comment">;</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Function as values</h2>
<h3>Assign properties to functions</h3>
<pre><code class="language-js"><span class="regexp">//</span> Compute factorials <span class="keyword">and</span> cache results as properties <span class="keyword">of</span> the <span class="reserved">function</span> itself.
<span class="reserved">function</span> factorial (n) {
  <span class="keyword">if</span> (!(n <span class="keyword">in</span> factorial)) {
    factorial[n] = n * factorial(n-<span class="number">1</span>); 
  }
  <span class="keyword">return</span> factorial[n];
}

factorial[<span class="number">1</span>] = <span class="number">1</span>; <span class="regexp">//</span> Initialize the cache to hold <span class="keyword">this</span> base <span class="reserved">case</span>.</code></pre>
<pre><code class="language-js">factorial(<span class="number">5</span>); <span class="comment">//120</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Function as values</h2>
<h3>Return function</h3>
<p>JavaScript functions can be returned by functions.</p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">greets</span> <span class="params">()</span> {</span>
  <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Hello!'</span>);
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Bye!'</span>);
  };
}</code></pre>
<pre><code class="language-js">var f = greets(); //<span class="string">"Hello!"</span>
f(); //<span class="string">"Bye!"</span>
f(); //<span class="string">"Bye!"</span>
//<span class="keyword">...</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Function as values</h2>
<h3>Return function</h3>
<p>JavaScript functions can be returned by functions.</p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">greets</span> <span class="params">()</span> {</span>
  <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Hello!'</span>);
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Bye!'</span>);
  };
}</code></pre>
<pre><code class="language-js">greets()();
<span class="comment">//"Hello!"</span>
<span class="comment">//"Bye!"</span></code></pre>
<pre><code class="language-js">greets()()();
<span class="regexp">//</span><span class="string">"Hello!"</span>
<span class="regexp">//</span><span class="string">"Bye!"</span>
<span class="regexp">//</span> TypeError: object <span class="keyword">is</span> <span class="keyword">not</span> a <span class="reserved">function</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Functions</h1>
<h2>Self-invoking functions</h2>
<p>JavaScript functions can be called right after they were defined.</p>
<pre><code class="language-js"><span class="list">(<span class="title">function</span><span class="body"> <span class="list">(<span class="body">)</span></span> { alert<span class="list">(<span class="body">'boo')</span></span><span class="comment">; }());</span></code></pre>
<pre><code class="language-js"><span class="keyword">var</span> message = (<span class="function"><span class="keyword">function</span> <span class="params">(name)</span> {</span> <span class="keyword">return</span> <span class="string">'Hello '</span> + name + <span class="string">'!'</span>; }(<span class="string">'dude'</span>));
message; <span class="comment">//"Hello dude!"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Inner (private) functions</h2>
<h3>Define functions inside functions</h3>
<p>JavaScript functions can be defined inside another function.</p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">f1</span> <span class="params">(a)</span> {</span>
  <span class="function"><span class="keyword">function</span> <span class="title">f2</span> <span class="params">(b)</span> {</span>
    <span class="keyword">return</span> b * <span class="number">2</span>;
  }
  <span class="keyword">return</span> f2(a);
};</code></pre>
<pre><code class="language-js">f1(<span class="number">2</span>); <span class="comment">//4</span></code></pre>
<pre><code class="language-js">f2(<span class="number">2</span>); <span class="regexp">//</span><span class="constant">ReferenceError</span><span class="symbol">:</span> f2 is <span class="keyword">not</span> <span class="keyword">defined</span></code></pre>
<h4>Note</h4>
<p><code>f2</code> is defined inside <code>f1</code> and it is not visible outside <code>f1</code>;
<code>f1</code> internally call the local function <code>f2</code>.</p>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Inner (private) functions</h2>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">greets</span> <span class="params">()</span> {</span>
  <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Hello!'</span>);
  greets = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="transposed_variable">console.</span><span class="built_in">log</span>(<span class="string">'Bye!'</span>);
    <span class="keyword">return</span> greets;
  };
  <span class="keyword">return</span> greets;
}</code></pre>
<pre><code class="language-js">greets()();
<span class="comment">//"Hello!"</span>
<span class="comment">//"Bye!"</span></code></pre>
<pre><code class="language-js">greets()()();
<span class="comment">//"Hello!"</span>
<span class="comment">//"Bye!"</span>
<span class="comment">//"Bye!"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<p>JavaScript uses <strong>function scope</strong>:<br>variables are visible within the function in which they are defined<br>and within any functions that are nested within that function.</p>
<p>A variable defined in a function is not visible outside the function, 
but a variable defined in a code block is visible outside the block.</p>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h3>Function Scope</h3>
<pre><code class="language-js"><span class="title">var</span> a = <span class="number">1</span>; 
<span class="title">function</span> f () { <span class="title">var</span> b = <span class="number">1</span>; <span class="title">return</span> a; }</code></pre>
<pre><code class="language-js"><span class="function"><span class="title">f</span><span class="params">()</span>;</code></pre>
<pre><code class="language-js">b; <span class="regexp">//b</span> is <span class="keyword">not</span> <span class="keyword">defined</span></code></pre>
<ul>
<li>variable <code>a</code> is in the global space  </li>
<li>variable <code>b</code> is in the scope of the function <code>f()</code>  </li>
<li>inside <code>f()</code>, both <code>a</code> and <code>b</code> are visible  </li>
<li>outside <code>f()</code>, <code>a</code> is visible, but <code>b</code> is not</li>
</ul>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Local and Global Scope</h3>
<p>A variable declared within a function has a <strong>local scope</strong>,<br>it is defined only within the body of the function.  </p>
<p>A variable not declared within a function has a <strong>global scope</strong>,<br>it is defined everywhere in the code.</p>
<p>A local variable, a variable declared within a function,<br>takes precedence over a global variable with the same name.</p>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Local and Global Scope</h3>
<pre><code class="language-js"><span class="keyword">var</span> scope = <span class="string">'global'</span>;

<span class="function"><span class="keyword">function</span> <span class="title">checkScope</span> <span class="params">()</span> {</span>
  <span class="keyword">var</span> scope = <span class="string">'local'</span>;
  <span class="keyword">return</span> scope;
}

checkScope(); <span class="comment">//"local"</span>
scope;        <span class="comment">//"global"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Local and Global Scope</h3>
<h4>Attention!</h4>
<p>You must always use <code>var</code> to declare local variables.</p>
<pre><code class="language-js"><span class="keyword">var</span> scope = <span class="string">'global'</span>;

<span class="function"><span class="keyword">function</span> <span class="title">checkScope</span> <span class="params">()</span> {</span>
  scope = <span class="string">'local'</span>;        <span class="comment">// if var is omitted, it refers to global variable</span>
  <span class="keyword">return</span> scope;
}

checkScope(); <span class="comment">//"local"</span>
scope;        <span class="comment">//"local"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Local variables</h3>
<p>Function parameters count as local variables<br>and are defined only within the body of the function.</p>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">checkParamScope</span> <span class="params">(a)</span> <span class="comment">{
  a += 1;
  console.log(a);
}</span>

<span class="title">console</span>.<span class="title">log</span><span class="params">(a)</span>;</span>     <span class="comment">//"undefined"</span>
checkParamScope(<span class="number">1</span>); <span class="comment">//2</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Scope Chain</h3>
<p>Each function has its own local scope.<br>It is possible to have several nested layers of local scope.</p>
<pre><code class="language-js">var a = <span class="number">1</span>;
// code here can see variable a <span class="keyword">and</span> <span class="function"><span class="keyword">function</span> <span class="title">f</span>

<span class="title">function</span> <span class="title">f</span> <span class="params">()</span></span>{
  var b = <span class="number">1</span>;
  // code here can see variables a <span class="keyword">and</span> b <span class="keyword">and</span> <span class="function"><span class="keyword">function</span> <span class="title">n</span>

  <span class="title">function</span> <span class="title">n</span> <span class="params">()</span></span> {
    var c = <span class="number">3</span>; 
    // code here can see variables a, b <span class="keyword">and</span> c
  }
}</code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Scope Chain</h3>
<pre><code class="language-js"><span class="title">var</span> scope = <span class="string">'global'</span>;

<span class="title">function</span> localScope () {
  <span class="title">var</span> scope = <span class="string">'local'</span>;

  <span class="title">function</span> nestedScope () {
    <span class="title">var</span> scope = <span class="string">'nested'</span>;
    <span class="title">return</span> scope;
  }

  <span class="title">return</span> nestedScope();
}</code></pre>
<pre><code class="language-js">localScope(); <span class="comment">//"nested"</span>
<span class="keyword">scope</span>;        <span class="comment">//"global"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Variable hoisting</h3>
<p>Since variables are visible within the function in which they are defined<br>variables are even visible before they are declared.<br>All variable declarations in a function (but not any associated assignments)<br>are &quot;hoisted&quot; to the top of the function.</p>

</article>


<!-- slide -->


<article>
<h3>Variable hoisting</h3>
<pre><code class="language-js"><span class="title">function</span> test (o) {
  var i = <span class="number">0</span>;                      //i is defined throughout function
  <span class="keyword">if</span> (<span class="typedef">typeof o == 'object') <span class="container">{
    <span class="title">var</span> <span class="title">j</span> = 0;                    //<span class="title">j</span> <span class="title">is</span> <span class="title">defined</span> <span class="title">everywhere</span>, <span class="title">not</span> <span class="title">just</span> <span class="title">block</span>
    <span class="title">for</span> (<span class="title">var</span> <span class="title">k</span>=0; <span class="title">k</span> &lt; 10; <span class="title">k</span>++) {  //<span class="title">k</span> <span class="title">is</span> <span class="title">defined</span> <span class="title">everywhere</span>, <span class="title">not</span> <span class="title">just</span> <span class="title">loop</span>
      <span class="title">console</span>.<span class="title">log</span>(<span class="title">k</span>);             //<span class="title">print</span> <span class="title">numbers</span> 0 <span class="title">through</span> 9
    }</span></span>
    console.log(k);               //k is still defined: prints <span class="number">10</span>
  }
  console.log(j);                 //j is defined, but may <span class="keyword">not</span> be initialized
}</code></pre>
<p>The variables <code>i</code>, <code>j</code>, and <code>k</code> are declared in different spots,<br>but all have the same scope, all three are defined throughout the body of the function.</p>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Variable hoisting</h3>
<pre><code class="language-js"><span class="keyword">var</span> scope = <span class="string">'global'</span>;

<span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">()</span> {</span>
  console.log(scope);  <span class="comment">//prints "undefined", not "local" nor "global"</span>
  <span class="keyword">var</span> scope = <span class="string">'local'</span>; <span class="comment">//variable scope initialized here, but defined everywhere in f</span>
  console.log(scope);  <span class="comment">//prints "local"</span>
}</code></pre>
<p>The function above is equivalent to the following:</p>
<pre><code class="language-js">function f () {
  var scope;          // <span class="keyword">local</span> variable <span class="keyword">is</span> declared <span class="keyword">at</span> <span class="keyword">the</span> top <span class="keyword">of</span> <span class="keyword">the</span> function
  console.<span class="command">log</span>(scope); // <span class="keyword">local</span> variable exists here, <span class="keyword">but</span> still has <span class="string">"undefined"</span> value
  scope = '<span class="keyword">local</span>';    // <span class="keyword">local</span> variable <span class="keyword">is</span> initialized
  console.<span class="command">log</span>(scope); // <span class="keyword">local</span> variable has <span class="keyword">the</span> value we expect
}</code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Function Scope</h2>
<h3>Variable hoisting</h3>
<h4>Tip</h4>
<p>Declare all the variables defined within a function at the top of the function.</p>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closures</h2>
<h3>Example #0</h3>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">()</span> {</span>
  <span class="keyword">var</span> b = <span class="string">'b'</span>;
}</code></pre>
<pre><code class="language-js">b; <span class="regexp">//b</span> is <span class="keyword">not</span> <span class="keyword">defined</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #1</h3>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">()</span> {</span>
  <span class="keyword">var</span> b = <span class="string">'b'</span>;
  <span class="keyword">return</span> b;
}</code></pre>
<pre><code class="language-js">b; <span class="regexp">//b</span> is <span class="keyword">not</span> <span class="keyword">defined</span></code></pre>
<pre><code class="language-js"><span class="title">b</span> = f();
<span class="title">b</span>; //<span class="string">"b"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #2</h3>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">()</span> {</span>
  <span class="keyword">var</span> b = <span class="string">'b'</span>;
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">return</span> b;
  };
}</code></pre>
<pre><code class="language-js"><span class="title">getB</span> = f();
<span class="title">b</span> = getB();
<span class="title">b</span>; //<span class="string">"b"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #3</h3>
<pre><code class="language-js"><span class="keyword">var</span> getB;
<span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">()</span> {</span>
  <span class="keyword">var</span> b = <span class="string">'b'</span>;
  getB = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">return</span> b;
  };
}</code></pre>
<pre><code class="language-js"><span class="title">b</span> = getB();
<span class="title">b</span>; //<span class="string">"b"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #4</h3>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">f</span> <span class="params">(arg)</span> {</span>
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">return</span> arg;
  };
}</code></pre>
<pre><code class="language-js"><span class="keyword">var</span> getArg = f(<span class="string">'Hello'</span>);
getArg(); <span class="comment">//"Hello"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #5</h3>
<pre><code class="language-js"><span class="function"><span class="keyword">function</span> <span class="title">countdown</span> <span class="params">(from)</span></span> {
  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span></span> {
    <span class="keyword">if</span> (from <span class="number">0</span>) {
      <span class="keyword">return</span> from<span class="comment">--;</span>
    } 
    <span class="keyword">return</span> <span class="string">'Finish!'</span>;
  };
}</code></pre>
<pre><code class="language-js"><span class="keyword">var</span> c = countdown(<span class="number">3</span>);
c(); <span class="comment">//3</span>
c(); <span class="comment">//2</span>
c(); <span class="comment">//1</span>
c(); <span class="comment">//"Finish!"</span>
c(); <span class="comment">//"Finish!"</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #6</h3>
<p>Let&#39;s loop three times, each time creating a new function that returns the loop sequence number.<br>The new functions will be added to an array and we&#39;ll return the array at the end. </p>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #6</h3>
<p>```js
function f () {
  var a = [];
  var i;</p>

</article>


<!-- slide -->


<article>
<p>  for (i = 0; i &lt; 3; i++) {
    a[i] = function () {
      return i;
    }
  }</p>
<p>  return a; 
}</p>
<pre><code>
```js
var a = f();</code></pre>
<pre><code class="language-js">a[<span class="number">0</span>](); <span class="comment">//3</span>
a[<span class="number">1</span>](); <span class="comment">//3</span>
a[<span class="number">2</span>](); <span class="comment">//3</span></code></pre>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #6 (that works!)</h3>
<p>```js
function f () {
  function getArg (x) {
    return function () {
      return x;
    } 
  }</p>

</article>


<!-- slide -->


<article>
<p>  var a = [];
  var i;</p>

</article>


<!-- slide -->


<article>
<p>  for (i = 0; i &lt; 3; i++) {
   a[i] = getArg(i);
  }</p>

</article>


<!-- slide -->


<article>
<p>  return a; 
}
```</p>

</article>


<!-- slide -->


<article>
<h1>Function</h1>
<h2>Closure</h2>
<h3>Example #7</h3>
<pre><code class="language-js"><span class="keyword">var</span> getValue, setValue;
(<span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
  <span class="keyword">var</span> secret = <span class="number">0</span>;
  getValue = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">return</span> secret;
  };
  setValue = <span class="function"><span class="keyword">function</span> <span class="params">(v)</span> {</span>
    secret = v;
  }; 
})();</code></pre>
<pre><code class="language-js">getValue();    <span class="comment">//0</span></code></pre>
<pre><code class="language-js"><span class="title">setValue</span>(<span class="number">123</span>);
<span class="title">getValue</span>();    //<span class="number">123</span></code></pre>

</article>


<script>
var slides;
var current = 0;
var next;
var max = Math.max;
var min = Math.min;

function init () {
  slides = document.querySelectorAll('article');

  //hide all
  for (var i = 0; i < slides.length; i += 1) {
    slides[i].style.display = 'none';
  }

  //show the first
  slides[0].style.display = 'block';

  //handle slide change
  document.addEventListener('keydown', function (event) {
    var code = event.keyCode;

    if (code === 37 || code === 38) {
      next = current - 1;
      if (next >= 0) {
        slides[current].style.display = 'none';
        slides[next].style.display = 'block';
        current = next;
      }
    } else if (code === 39 || code === 40) {
      next = current + 1;
      if (next < slides.length) {
        slides[current].style.display = 'none';
        slides[next].style.display = 'block';
        current = next;
      }
    } else if (code === 8) {
      slides[current].style.display = 'none';
      current = 0;
      slides[current].style.display = 'block';
    }

    console.log('current slide: ' + current);
  });
}

document.onreadystatechange = function () {
  if (document.readyState == "complete") {
    init();
  }
}
</script>
</body>
</html>